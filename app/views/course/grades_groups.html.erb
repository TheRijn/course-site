<div id="content">
	
	<header class="page-header">
		<h1>Students</h1>
		<ul class="nav nav-pills">
			<% Group.order(:name).all.each_with_index do |group,i| %>
			<li <%= 'class="active"'.html_safe if i==0 %>><a href="#group<%= i %>" data-toggle="tab"><%= group.name %> (<%= group.users.count %>)</a></li>
			<% end %>
			<li <%= 'class="active"'.html_safe if Group.count == 0 %>><a href="#other" data-toggle="tab">Other (<%= @groupless.count %>)</a></li>
			<li><a href="#admins" data-toggle="tab">Admins (<%= @admins.count %>)</a></li>
		</ul>
	</header>

	<div class="tab-content">
		<% Group.order(:name).all.each_with_index do |group,i| %>
		<section class="tab-pane <%= 'active' if i==0 %>" id="group<%= i %>">
			<%= render partial: 'grade_table', locals: { users: group.users.order(:name), psets: @psets, schedules: Schedule.all } %>
		</section>
		<% end %>
		<section class="tab-pane <%= 'active' if Group.count == 0 %>" id="other">
			<%= render partial: 'grade_table', locals: { users: @groupless, psets: @psets, schedules: Schedule.all } %>
		</section>
		<section class="tab-pane" id="admins">
			<%= render partial: 'grade_table', locals: { users: @admins, psets: @psets, schedules: Schedule.all } %>
		</section>
	</div>

</div>


<script type="text/javascript" charset="utf-8">
	$('.best_in_place').best_in_place()
</script>

<script type="text/javascript" charset="utf-8">
	function add_student(track_id)
	{
		x = prompt("Student id?");
		if(x)
		{
			$.post("/course/add_student", { track_id: track_id, student_id: x },
				function()
				{
					location.reload();
				}
			);
		}
	}
</script>